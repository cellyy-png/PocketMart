<view class="container">
  <view class="search-sticky" style="padding-top: {{navTop}}px; padding-right: {{navRight}}px">
    
    <view class="search-bar-box" style="height: {{navHeight}}px">
      <icon type="search" size="14" color="#6B7C85" class="icon-search" />
      <input 
        class="search-input" 
        placeholder="Search items..." 
        placeholder-class="ph-style"
        value="{{keyword}}" 
        bindinput="onSearchInput"
        bindconfirm="onSearch"
        focus="{{true}}"
        confirm-type="search"
        style="height: {{navHeight}}px; line-height: {{navHeight}}px"
      />
      <view class="icon-clear-box" wx:if="{{keyword}}" bindtap="onClearKeyword">
        <icon type="clear" size="14" color="#ccc" />
      </view>
    </view>
    
    <view class="btn-cancel" bindtap="onCancel">Cancel</view>
  </view>

  <view wx:if="{{!showResult}}" class="suggestion-area">
    <view class="section-box">
      <view class="section-header">POPULAR SEARCH</view>
      <view class="tag-wrap">
        <view 
          wx:for="{{hotKeywords}}" 
          wx:key="index"
          class="tag-item"
          bindtap="onSearch"
          data-keyword="{{item}}"
        >
          {{item}}
        </view>
      </view>
    </view>

    <view class="section-box" wx:if="{{searchHistory.length > 0}}">
      <view class="section-header">
        <text>HISTORY</text>
        <view class="btn-clean" bindtap="onClearHistory">Clear</view>
      </view>
      <view class="tag-wrap">
        <view 
          wx:for="{{searchHistory}}" 
          wx:key="index"
          class="tag-item history"
          bindtap="onSearch"
          data-keyword="{{item}}"
        >
          {{item}}
        </view>
      </view>
    </view>
  </view>

  <view wx:else class="result-area">
    <scroll-view scroll-y class="scroll-view" bindscrolltolower="onReachBottom">
      <view class="product-grid">
        <view class="product-card" wx:for="{{products}}" wx:key="id" bindtap="onProductTap" data-id="{{item.id}}">
          <view class="img-box">
            <image class="p-img" src="{{item.image}}" mode="aspectFill" lazy-load></image>
          </view>
          <view class="p-info">
            <view class="p-name">{{item.name}}</view>
            <view class="p-meta">
              <view class="price-box">
                <text class="symbol">Â¥</text>
                <text class="num">{{item.price}}</text>
              </view>
              <text class="sales">Sold {{item.sales}}</text>
            </view>
          </view>
        </view>
      </view>

      <view class="footer-state">
        <loading wx:if="{{loading}}" text="Loading..." />
        <view wx:elif="{{!hasMore && products.length > 0}}" class="no-more">- THE END -</view>
        <view wx:if="{{!loading && products.length === 0}}" class="empty-box">
          <icon type="search" size="40" color="#E0E0E0" />
          <text>No results found</text>
        </view>
      </view>
    </scroll-view>
  </view>
</view>