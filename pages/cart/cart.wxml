<view class="page-container" wx:if="{{!isEmpty}}">
  <view class="cart-list">
    <block wx:for="{{cartList}}" wx:key="id">
      <view class="cart-card">
        
        <view class="checkbox-area" bindtap="onCheck" data-index="{{index}}">
          <view class="custom-checkbox {{item.checked ? 'active' : ''}}">
            <text wx:if="{{item.checked}}" class="check-icon">✓</text>
          </view>
        </view>

        <view class="img-box">
          <image class="thumb" src="{{item.image}}" mode="aspectFill" />
        </view>

        <view class="info-box">
          <view class="top-row">
            <view class="title">{{item.name}}</view>
            <view class="delete-icon" catchtap="onDelete" data-index="{{index}}">×</view>
          </view>

          <view class="sku-tag" wx:if="{{item.specs}}">{{item.specs}}</view>

          <view class="bottom-row">
            <view class="price-box">
              <text class="symbol">¥</text>
              <text class="num">{{item.price}}</text>
            </view>
            
            <view class="stepper">
              <view class="step-btn minus {{item.quantity <= 1 ? 'disabled' : ''}}" 
                    catchtap="onQtyChange" data-index="{{index}}" data-type="minus">-</view>
              <view class="step-num">{{item.quantity}}</view>
              <view class="step-btn plus" 
                    catchtap="onQtyChange" data-index="{{index}}" data-type="plus">+</view>
            </view>
          </view>
        </view>
      </view>
    </block>
    
    <view style="height: 120rpx;"></view>
  </view>

  <view class="footer-bar">
    <view class="left-action" bindtap="onCheckAll">
      <view class="custom-checkbox {{isAllChecked ? 'active' : ''}}">
        <text wx:if="{{isAllChecked}}" class="check-icon">✓</text>
      </view>
      <text class="select-txt">全选</text>
    </view>
    
    <view class="right-action">
      <view class="total-info">
        <text class="label">合计</text>
        <text class="price-symbol">¥</text>
        <text class="total-price">{{totalPrice}}</text>
      </view>
      <view class="checkout-btn {{totalCount == 0 ? 'disabled' : ''}}" bindtap="toConfirm">
        去结算 ({{totalCount}})
      </view>
    </view>
  </view>
</view>

<view class="empty-state" wx:else>
    <image class="empty-icon" src="/assets/images/icons/cart.png" mode="aspectFit"></image>
  <view class="empty-text">购物车还是空的</view>
  <view class="empty-sub">去挑选几件喜欢的商品吧</view>
  <button class="go-shop-btn" bindtap="onGoShopping">去逛逛</button>
</view>